<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå± –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #66cc99 0%, #339966 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            background: white;
        }
        .card-header {
            background: linear-gradient(135deg, #339966 0%, #227755 100%);
            color: white;
            border-radius: 15px 15px 0 0 !important;
        }
        .result-container {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .disease-card {
            border-left: 5px solid #dc3545;
            background: #fff8f8;
        }
        .healthy-card {
            border-left: 5px solid #28a745;
            background: #f8fff8;
        }
        .confidence-badge {
            font-size: 1.5rem;
            font-weight: bold;
            padding: 10px 20px;
            border-radius: 50px;
        }
        .high-confidence {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        .medium-confidence {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            color: white;
        }
        .low-confidence {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
        }
        .recommendations {
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e9ecef;
        }
        .supported-plants-card {
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #17a2b8;
        }
        .plant-info {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            background: rgba(255,255,255,0.7);
        }
        .plant-icon {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            color: white;
            font-size: 20px;
        }
        .pepper-icon { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); }
        .potato-icon { background: linear-gradient(135deg, #8d6e63 0%, #5d4037 100%); }
        .tomato-icon { background: linear-gradient(135deg, #ff5252 0%, #e53935 100%); }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card shadow-lg mb-4">
                    <div class="card-header text-center py-4">
                        <h1 class="display-4 fw-bold">
                            <i class="fas fa-microscope me-2"></i>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
                        </h1>
                    </div>
                    <div class="alert alert-info alert-dismissible fade show m-3" role="alert">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫—É–ª—å—Ç—É—Ä—ã:</strong> üå∂Ô∏è –ü–µ—Ä–µ—Ü, ü•î –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å, üçÖ –ü–æ–º–∏–¥–æ—Ä—ã
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    <div class="card-body p-4">
                        <div class="row align-items-center mb-4">
                            <div class="col-md-6 text-center mb-4 mb-md-0">
                                <img src="{{ image_url }}" class="img-fluid rounded shadow" style="max-height: 400px; object-fit: contain;" alt="–†–∞—Å—Ç–µ–Ω–∏–µ">
                            </div>
                            <div class="col-md-6">
                                <div class="result-container">
                                    <h2 class="fw-bold mb-3 text-center">
                                        <i class="fas fa-diagnoses me-2"></i>–î–∏–∞–≥–Ω–æ–∑
                                    </h2>

                                    {% set is_healthy = 'healthy' in result.class.lower() or 'healthy' in result.display_name.lower() %}

                                    <div class="card {% if is_healthy %}healthy-card{% else %}disease-card{% endif %} mb-4">
                                        <div class="card-body text-center">
                                            <h3 class="card-title fw-bold mb-2">
                                                {% if is_healthy %}
                                                    <i class="fas fa-check-circle text-success me-2"></i>–ó–î–û–†–û–í–û–ï –†–ê–°–¢–ï–ù–ò–ï
                                                {% else %}
                                                    <i class="fas fa-exclamation-triangle text-danger me-2"></i>–û–ë–ù–ê–†–£–ñ–ï–ù–ê –ë–û–õ–ï–ó–ù–¨
                                                {% endif %}
                                            </h3>
                                            <p class="card-text fs-4 fw-bold">{{ result.display_name }}</p>
                                            <span class="confidence-badge
                                                {% if result.confidence >= 90 %}high-confidence
                                                {% elif result.confidence >= 70 %}medium-confidence
                                                {% else %}low-confidence{% endif %}">
                                                {{ "%.2f"|format(result.confidence) }}%
                                            </span>
                                        </div>
                                    </div>

                                    <div class="text-center mt-3">
                                        <p class="text-muted mb-2">
                                            <i class="fas fa-info-circle me-2"></i>–£—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
                                        </p>
                                        <div class="progress" style="height: 20px;">
                                            <div class="progress-bar {% if result.confidence >= 90 %}bg-success
                                                {% elif result.confidence >= 70 %}bg-warning
                                                {% else %}bg-danger{% endif %}"
                                                 role="progressbar"
                                                 style="width: {{ result.confidence }}%"
                                                 aria-valuenow="{{ result.confidence }}"
                                                 aria-valuemin="0"
                                                 aria-valuemax="100">
                                                {{ "%.1f"|format(result.confidence) }}%
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="supported-plants-card">
                                    <h5 class="fw-bold mb-3">
                                        <i class="fas fa-seedling me-2 text-success"></i>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
                                    </h5>
                                    <p class="mb-2">
                                        <strong>–¢–æ—á–Ω–æ—Å—Ç—å:</strong> 95.96%<br>
                                        <strong>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫—É–ª—å—Ç—É—Ä—ã:</strong> –ø–µ—Ä–µ—Ü, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å, –ø–æ–º–∏–¥–æ—Ä—ã<br>
                                        <strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–æ–ª–µ–∑–Ω–µ–π:</strong> 15 —Ç–∏–ø–æ–≤
                                    </p>
                                    <div class="mt-3">
                                        <h6 class="fw-bold mb-2"><i class="fas fa-info-circle me-1"></i>–î–µ—Ç–∞–ª–∏ –¥–∏–∞–≥–Ω–æ–∑–∞:</h6>
                                        <div class="plant-info">
                                            <div class="plant-icon {% if 'Pepper' in result.display_name %}pepper-icon{% elif 'Potato' in result.display_name %}potato-icon{% elif 'Tomato' in result.display_name %}tomato-icon{% endif %}">
                                                {% if 'Pepper' in result.display_name %}<i class="fas fa-pepper-hot"></i>
                                                {% elif 'Potato' in result.display_name %}<i class="fas fa-potato"></i>
                                                {% elif 'Tomato' in result.display_name %}<i class="fas fa-tomato"></i>
                                                {% else %}<i class="fas fa-leaf"></i>{% endif %}
                                            </div>
                                            <div>
                                                {% if 'Pepper' in result.display_name %}
                                                    <strong> –∫—É–ª—å—Ç—É—Ä–∞:</strong> –ü–µ—Ä–µ—Ü
                                                {% elif 'Potato' in result.display_name %}
                                                    <strong> –∫—É–ª—å—Ç—É—Ä–∞:</strong> –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å
                                                {% elif 'Tomato' in result.display_name %}
                                                    <strong> –∫—É–ª—å—Ç—É—Ä–∞:</strong> –ü–æ–º–∏–¥–æ—Ä—ã
                                                {% else %}
                                                    <strong> –∫—É–ª—å—Ç—É—Ä–∞:</strong> –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="recommendations">
                                    <h4 class="fw-bold mb-3">
                                        <i class="fas fa-lightbulb me-2"></i>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                                    </h4>
                                    <ul class="list-group list-group-flush">
                                        {% if is_healthy %}
                                            <li class="list-group-item">
                                                <i class="fas fa-check text-success me-2"></i>–†–∞—Å—Ç–µ–Ω–∏–µ –∑–¥–æ—Ä–æ–≤–æ–µ, –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —É—Ö–æ–¥ –≤ —Ç–æ–º –∂–µ —Ä–µ–∂–∏–º–µ
                                            </li>
                                            <li class="list-group-item">
                                                <i class="fas fa-shield-alt text-success me-2"></i>–ü—Ä–æ–≤–æ–¥–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–º–æ—Ç—Ä—ã —Ä–∞–∑ –≤ 2 –Ω–µ–¥–µ–ª–∏
                                            </li>
                                            <li class="list-group-item">
                                                <i class="fas fa-leaf text-success me-2"></i>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ–ª–∏–≤–æ–º –∏ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
                                            </li>
                                        {% else %}
                                            <li class="list-group-item">
                                                <i class="fas fa-bacteria text-danger me-2"></i>–ò–∑–æ–ª–∏—Ä—É–π—Ç–µ –±–æ–ª—å–Ω–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö
                                            </li>
                                            <li class="list-group-item">
                                                <i class="fas fa-syringe text-warning me-2"></i>–ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–≥–∏—Ü–∏–¥—ã/–ø–µ—Å—Ç–∏—Ü–∏–¥—ã
                                            </li>
                                            <li class="list-group-item">
                                                <i class="fas fa-user-md text-info me-2"></i>–ü—Ä–∏ —Å–æ–º–Ω–µ–Ω–∏—è—Ö –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–π—Ç–µ—Å—å —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º
                                            </li>
                                            <li class="list-group-item">
                                                <i class="fas fa-sync-alt text-primary me-2"></i>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø–æ—Å–ª–µ –ª–µ—á–µ–Ω–∏—è
                                            </li>
                                        {% endif %}
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <a href="/" class="btn btn-primary btn-lg px-5 py-3 m-2">
                                <i class="fas fa-plus me-2"></i>–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ
                            </a>
                            <button onclick="window.print()" class="btn btn-outline-secondary btn-lg px-5 py-3 m-2">
                                <i class="fas fa-print me-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>